{% extends 'website/base.html' %}
{% load static %}

{% block title_block %}
    New Recipe
{% endblock %}

{% block create_active %}
active
{% endblock %}

{% block style_block %}
    <link rel="stylesheet" href="{% static 'css/form.css' %}">
    <link rel="stylesheet" href="{% static 'css/create_recipe.css' %}">
    <script src="{% static 'js/create_recipe.js' %}" data-tags="{{ tags }}"></script>
    <script src="{% static 'js/third-party/Sortable.js' %}"></script>
    <script src="https://unpkg.com/cropperjs"></script>
{% endblock %}

{% block body_block %}
<div class="create-block">
    <h1>New Recipe</h1>
    <p>Share a delicious dish with the world!</p>
    
    <form id="recipeForm">
        <label for="title">Title</label>
        <input type="text" name="title" id="recipe-title" maxlength="128" placeholder="What's your dish called?" required><br />
        <label for="description">Description<br /><span class="mini-helptext">This is displayed in the feed and anywhere else the post appears.</span></label>
        <textarea name="description" id="recipe-description" maxlength="512" rows="4" placeholder="Tell us a bit about your dish" required></textarea><br />

        <label for="picture">Cover Image</label>
        <input type="file" id="recipePicture" name="picture" accept="image/*" required />
        <div id="cropper-help">
            <p>Scroll to zoom, drag to move the selection.</p>
        </div>
        <div id="cropper-container"></div>
        <div id="cropper-output"></div>

        <label>Ingredients<br /><span class="mini-helptext">Be specific - mention quantity and any pre-preparation you don't want to include in the instructions.</span></label>
        <div id="ingredients-container"></div>
        <div style="width: 100%">
            <input type="text" name="add-ingredient" id="add-ingredient" placeholder="Add an ingredient">
            <button id="add-ingredient-button" onclick="addIngredient(event)">Add</button> <br />
        </div>
        <p class="shortcut">Enter to add.</p>

        <label>Instructions<br /><span class="mini-helptext">Add the steps to make your dish in order. Reorder them by dragging the handles on the left.</span></label>
        <div id="instructions-container"></div>
        <div id="instructions-flex">
            <textarea name="add-step" id="add-step" rows="2" placeholder="Add a step"></textarea>
            <button id="add-step-button" onclick="addStep(event)">Add</button> <br />
        </div>
        <p class="shortcut">Ctrl / âŒ˜ + Enter to add.</p>

        <input type="submit" value="Post Recipe"> <span>You'll be able to edit and delete your recipe after posting.</span>
    </form>

</div>
{% endblock %}
